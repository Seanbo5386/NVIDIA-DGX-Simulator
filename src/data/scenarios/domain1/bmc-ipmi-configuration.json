{
  "id": "domain1-bmc-config",
  "title": "BMC and IPMI Configuration",
  "domain": "domain1",
  "difficulty": "intermediate",
  "description": "Configure BMC (Baseboard Management Controller) settings for remote management. Essential for out-of-band system management and troubleshooting hung or unresponsive systems.",
  "learningObjectives": [
    "Query BMC information",
    "Check sensor readings",
    "View system event log",
    "Understand power management"
  ],
  "faults": [],
  "initialClusterState": {},
  "steps": [
    {
      "id": "step1",
      "title": "Query BMC Information",
      "description": "Get basic BMC info including firmware version and network settings. The BMC provides out-of-band management even when the host OS is unresponsive.",
      "objectives": ["View BMC details"],
      "expectedCommands": ["ipmitool mc info", "ipmitool lan print"],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Query BMC",
          "expectedCommands": ["ipmitool mc info"],
          "requireAllCommands": true
        }
      ],
      "hints": ["ipmitool mc info shows management controller details"],
      "enhancedHints": [
        {
          "id": "step1-hint1",
          "level": 1,
          "message": "ipmitool is the standard IPMI management tool",
          "trigger": { "type": "time-based", "timeSeconds": 30 }
        },
        {
          "id": "step1-hint2",
          "level": 2,
          "message": "Try: ipmitool mc info",
          "trigger": { "type": "time-based", "timeSeconds": 60 }
        }
      ],
      "estimatedDuration": 3,
      "documentationLinks": [
        { "title": "IPMI Specification", "url": "https://www.intel.com/content/www/us/en/products/docs/servers/ipmi/ipmi-home.html" }
      ]
    },
    {
      "id": "step2",
      "title": "Check Hardware Sensors",
      "description": "View temperature, voltage, and fan sensors via IPMI. The Sensor Data Repository (SDR) contains all sensor information.",
      "objectives": ["Read sensor values"],
      "expectedCommands": ["ipmitool sdr list", "ipmitool sensor list"],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Read sensors",
          "expectedCommands": ["ipmitool sdr", "ipmitool sensor"],
          "requireAllCommands": false
        }
      ],
      "hints": ["sdr = Sensor Data Repository"],
      "enhancedHints": [
        {
          "id": "step2-hint1",
          "level": 1,
          "message": "SDR contains sensor definitions and current values",
          "trigger": { "type": "time-based", "timeSeconds": 30 }
        },
        {
          "id": "step2-hint2",
          "level": 2,
          "message": "Try: ipmitool sdr list full",
          "trigger": { "type": "time-based", "timeSeconds": 60 }
        },
        {
          "id": "step2-hint3",
          "level": 3,
          "message": "Filter by type: ipmitool sdr type temperature",
          "trigger": { "type": "time-based", "timeSeconds": 90 }
        }
      ],
      "estimatedDuration": 3
    },
    {
      "id": "step3",
      "title": "View System Event Log",
      "description": "The SEL (System Event Log) contains hardware events and errors. Critical for troubleshooting system issues and understanding hardware history.",
      "objectives": ["View SEL entries"],
      "expectedCommands": ["ipmitool sel list", "ipmitool sel info"],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "View SEL",
          "expectedCommands": ["ipmitool sel"],
          "requireAllCommands": true
        }
      ],
      "hints": ["SEL = System Event Log"],
      "enhancedHints": [
        {
          "id": "step3-hint1",
          "level": 1,
          "message": "SEL records hardware events, errors, and state changes",
          "trigger": { "type": "time-based", "timeSeconds": 30 }
        },
        {
          "id": "step3-hint2",
          "level": 2,
          "message": "Try: ipmitool sel list",
          "trigger": { "type": "time-based", "timeSeconds": 60 }
        },
        {
          "id": "step3-hint3",
          "level": 3,
          "message": "For details: ipmitool sel info shows log capacity and entries",
          "trigger": { "type": "time-based", "timeSeconds": 90 }
        }
      ],
      "estimatedDuration": 3,
      "documentationLinks": [
        { "title": "IPMI SEL Reference", "url": "https://docs.nvidia.com/dgx/dgx-os-6-user-guide/maintenance.html" }
      ]
    },
    {
      "id": "step4",
      "title": "Power Management",
      "description": "IPMI allows remote power control - essential for hung systems. You can check power status, cycle power, or perform hard resets remotely.",
      "objectives": ["Understand power commands"],
      "expectedCommands": ["ipmitool chassis status", "ipmitool dcmi get_power_reading"],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "Check power status",
          "expectedCommands": ["ipmitool chassis", "ipmitool dcmi"],
          "requireAllCommands": false
        }
      ],
      "hints": ["chassis status shows power state"],
      "enhancedHints": [
        {
          "id": "step4-hint1",
          "level": 1,
          "message": "chassis commands control system power",
          "trigger": { "type": "time-based", "timeSeconds": 30 }
        },
        {
          "id": "step4-hint2",
          "level": 2,
          "message": "Try: ipmitool chassis status",
          "trigger": { "type": "time-based", "timeSeconds": 60 }
        },
        {
          "id": "step4-hint3",
          "level": 3,
          "message": "Power commands: power on, power off, power cycle, power reset",
          "trigger": { "type": "time-based", "timeSeconds": 90 }
        }
      ],
      "estimatedDuration": 3
    },
    {
      "id": "step5",
      "title": "View FRU Information",
      "description": "Field Replaceable Unit (FRU) data contains hardware inventory information including serial numbers, part numbers, and manufacturer data.",
      "objectives": ["Read FRU inventory"],
      "expectedCommands": ["ipmitool fru print"],
      "validationRules": [
        {
          "type": "command-executed",
          "description": "View FRU data",
          "expectedCommands": ["ipmitool fru"],
          "requireAllCommands": true
        }
      ],
      "hints": ["FRU contains hardware inventory information"],
      "enhancedHints": [
        {
          "id": "step5-hint1",
          "level": 1,
          "message": "FRU = Field Replaceable Unit inventory",
          "trigger": { "type": "time-based", "timeSeconds": 30 }
        },
        {
          "id": "step5-hint2",
          "level": 2,
          "message": "Try: ipmitool fru print",
          "trigger": { "type": "time-based", "timeSeconds": 60 }
        }
      ],
      "estimatedDuration": 2
    }
  ],
  "successCriteria": [
    "Queried BMC information",
    "Read hardware sensors",
    "Viewed system event log",
    "Understood power management",
    "Retrieved FRU inventory"
  ],
  "estimatedTime": 15,
  "prerequisites": [],
  "tags": ["bmc", "ipmi", "sensors", "sel", "power", "remote-management", "fru", "domain1"]
}
